(()=>{function e(){var e=$("#countdown_active").is(":checked"),t=$('input[name="manuell"]:checked').val();e&&1==t?($('input[name="next_livestream_date"]').removeAttr("disabled").attr("required",!0),$('input[name="next_livestream_starttime"]').removeAttr("disabled").attr("required",!0),$('input[name="next_livestream_endtime"]').removeAttr("disabled").attr("required",!0)):($('input[name="next_livestream_date"]').removeAttr("required").attr("disabled",!0),$('input[name="next_livestream_starttime"]').removeAttr("required").attr("disabled",!0),$('input[name="next_livestream_endtime"]').removeAttr("required").attr("disabled",!0))}function t(e){var t=e-(new Date).getTime(),n=Math.floor(t/864e5);n=n<=0?0:n;var a=Math.floor(t%864e5/36e5);a=a<=0?0:a;var i=Math.floor(t%36e5/6e4);i=i<=0?0:i;var o=Math.floor(t%6e4/1e3);o=o<=0?0:o;var r=[];return n>0&&(n=n<10?"0"+n:n,r.push(n)),a=a<10?"0"+a:a,r.push(a),i=i<10?"0"+i:i,r.push(i),o=o<10?"0"+o:o,r.push(o),r.join(":")}$((function(){if($("h5.livestream-countdown").is(":visible")){var n=1e3*parseInt($("h5.livestream-countdown").data("end")),a=setInterval((function(){$("h5.livestream-countdown").text(t(n))}),1e3),i=(new Date).getTime(),o=n-i;setTimeout((function(){clearInterval(a),$("h5.livestream-countdown").hide()}),o)}if($(".upcoming-countdown").is(":visible")){var r=1e3*parseInt($(".upcoming-countdown").data("start")),c=setInterval((function(){$(".upcoming-countdown").text(t(r))}),1e3);i=(new Date).getTime(),o=r-i,setTimeout((function(){clearInterval(c),$(".upcoming-livestream").hide()}),o)}$(".live-countdown").is(":visible")&&setInterval((function(){var e=1e3*$(".live-countdown").data("end");$(".live-countdown").text(t(e))}),1e3),$(".livestream-mode-selection .selectable").is(":visible")&&$(".livestream-mode-selection .selectable").on("click",(function(e){e.preventDefault();var t=$(this).data("mode"),n=$('input[type="hidden"][name="livestream-mode"]');n&&t&&(n.val(t),n.parent().submit())})),$(".clipboard-btn").is(":visible")&&$(".clipboard-btn").on("click",(function(e){e.preventDefault();var t=$(this).data("target-id"),n=$(this).data("target-title")?$(this).data("target-title"):"Das Feld".toLocaleString(),a=function(e){var t=!1;try{var n=document.getElementById(e),a=document.createElement("textarea");a.value=n.textContent,document.body.appendChild(a),a.select(),document.execCommand("Copy"),a.remove(),t=!0}catch(e){console.log(e)}return t}(t),i="".concat(n," wurde in die Zwischenablage kopiert.").toLocaleString(),o="success";a||(i="".concat(n," konnte nicht in die Zwischenablage kopiert werden.").toLocaleString(),o="error"),function(e,t,n){var a=$("#".concat(n)).closest("form").find(".messagebox");if(a.length){a.removeClass();var i="messagebox_".concat(t);a.addClass("messagebox "+i),a.text(e),a.show()}}(i,o,t)})),$(document).on("change","#countdown_active",(function(t){$(t.target).is(":checked")?$("#livestream_next").show((function(){e()})):$("#livestream_next").hide((function(){e()}))})),$(document).on("change","#livestream_next",(function(t){e()}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9MaXZlU3RyZWFtaW5nLy4vc3JjL2phdmFzY3JpcHRzL2xpdmVzdHJlYW0uanMiXSwibmFtZXMiOlsidG9nZ2xlRGF0ZVRpbWVJbnB1dEF0dHJpYnV0ZXMiLCJjb3VudGRvd24iLCIkIiwiaXMiLCJtYW51ZWxsIiwidmFsIiwicmVtb3ZlQXR0ciIsImF0dHIiLCJnZXRDb3VudGRvd24iLCJlbmRfdGltZXN0YW1wIiwiZGlzdGFuY2UiLCJEYXRlIiwiZ2V0VGltZSIsImRheXMiLCJNYXRoIiwiZmxvb3IiLCJob3VycyIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwicHVzaCIsImpvaW4iLCJwYXJzZUludCIsImRhdGEiLCJsaXZlc3RyZWFtX2NvdW50ZG93biIsInNldEludGVydmFsIiwidGV4dCIsIm5vdyIsImRpZmZlcmVuY2UiLCJzZXRUaW1lb3V0IiwiY2xlYXJJbnRlcnZhbCIsImhpZGUiLCJzdGFydF90aW1lc3RhbXAiLCJ1cGNvbW1pbmdfY291bnRkb3duIiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJtb2RlIiwidGhpcyIsImlucHV0IiwicGFyZW50Iiwic3VibWl0IiwidGFyZ2V0X2lkIiwidGFyZ2V0X3RpdGxlIiwidG9Mb2NhbGVTdHJpbmciLCJjb3BpZWQiLCJpc19jb3BpZWQiLCJ0YXJnZXRlZF9zcGFuX2VsZW1lbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidGVtcF90ZXh0YXJlYSIsImNyZWF0ZUVsZW1lbnQiLCJ2YWx1ZSIsInRleHRDb250ZW50IiwiYm9keSIsImFwcGVuZENoaWxkIiwic2VsZWN0IiwiZXhlY0NvbW1hbmQiLCJyZW1vdmUiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJjb3B5VG9DbGlwYm9hcmQiLCJtZXNzYWdlIiwidHlwZSIsIm1lc3NhZ2Vib3hfZWxlbWVudCIsImNsb3Nlc3QiLCJmaW5kIiwibGVuZ3RoIiwicmVtb3ZlQ2xhc3MiLCJjbGFzc190eXBlIiwiYWRkQ2xhc3MiLCJzaG93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QW9CNEIsTUFBSyxXQUN2QjlCLFVBS1pFLEVBQUU2QyxVQUFVZCxHQUFHLFNBQVUsb0JBQW9CLFNBQVN3QyxHQUNsRHpFLFciLCJmaWxlIjoiamF2YXNjcmlwdHMvbGl2ZXN0cmVhbS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogbGl2ZXN0cmVhbS5qcyAtIExpdmVTdHJlYW0gamF2YXNjcmlwdCBmaWxlIGZvciBTdHVkLklQXG4gKiBAYXV0aG9yICAgIEZhcmJvZCBaYW1hbmkgQm9yb3VqZW5pIDx6YW1hbmlAZWxhbi1ldi5kZT5cbiAqXG4gKiBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yXG4gKiBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhc1xuICogcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDIgb2ZcbiAqIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLlxuICovXG5cbiQoZnVuY3Rpb24oKXtcbiAgICBpZiAoJCgnaDUubGl2ZXN0cmVhbS1jb3VudGRvd24nKS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICB2YXIgZW5kX3RpbWVzdGFtcCA9IHBhcnNlSW50KCQoJ2g1LmxpdmVzdHJlYW0tY291bnRkb3duJykuZGF0YSgnZW5kJykpICogMTAwMDtcbiAgICAgICAgdmFyIGxpdmVzdHJlYW1fY291bnRkb3duID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgJCgnaDUubGl2ZXN0cmVhbS1jb3VudGRvd24nKS50ZXh0KGdldENvdW50ZG93bihlbmRfdGltZXN0YW1wKSk7XG4gICAgICAgIH0sIDEwMDApO1xuICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIHZhciBkaWZmZXJlbmNlID0gZW5kX3RpbWVzdGFtcCAtIG5vdztcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKGxpdmVzdHJlYW1fY291bnRkb3duKTtcbiAgICAgICAgICAgICQoJ2g1LmxpdmVzdHJlYW0tY291bnRkb3duJykuaGlkZSgpO1xuICAgICAgICB9LCBkaWZmZXJlbmNlKTtcbiAgICB9XG5cbiAgICBpZiAoJCgnLnVwY29taW5nLWNvdW50ZG93bicpLmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAgIHZhciBzdGFydF90aW1lc3RhbXAgPSBwYXJzZUludCgkKCcudXBjb21pbmctY291bnRkb3duJykuZGF0YSgnc3RhcnQnKSkgKiAxMDAwO1xuICAgICAgICB2YXIgdXBjb21taW5nX2NvdW50ZG93biA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgICQoJy51cGNvbWluZy1jb3VudGRvd24nKS50ZXh0KGdldENvdW50ZG93bihzdGFydF90aW1lc3RhbXApKTtcbiAgICAgICAgfSwgMTAwMCk7XG5cbiAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICB2YXIgZGlmZmVyZW5jZSA9IHN0YXJ0X3RpbWVzdGFtcCAtIG5vdztcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHVwY29tbWluZ19jb3VudGRvd24pO1xuICAgICAgICAgICAgJCgnLnVwY29taW5nLWxpdmVzdHJlYW0nKS5oaWRlKCk7XG4gICAgICAgIH0sIGRpZmZlcmVuY2UpO1xuICAgIH1cblxuICAgIGlmICgkKCcubGl2ZS1jb3VudGRvd24nKS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICB2YXIgbGl2ZV9jb3VudGRvd24gPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBlbmRfdGltZXN0YW1wID0gJCgnLmxpdmUtY291bnRkb3duJykuZGF0YSgnZW5kJykgKiAxMDAwO1xuICAgICAgICAgICAgJCgnLmxpdmUtY291bnRkb3duJykudGV4dChnZXRDb3VudGRvd24oZW5kX3RpbWVzdGFtcCkpO1xuICAgICAgICB9LCAxMDAwKTtcbiAgICB9XG5cbiAgICBpZiAoJCgnLmxpdmVzdHJlYW0tbW9kZS1zZWxlY3Rpb24gLnNlbGVjdGFibGUnKS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAkKCcubGl2ZXN0cmVhbS1tb2RlLXNlbGVjdGlvbiAuc2VsZWN0YWJsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciBtb2RlID0gJCh0aGlzKS5kYXRhKCdtb2RlJyk7XG4gICAgICAgICAgICB2YXIgaW5wdXQgPSAkKCdpbnB1dFt0eXBlPVwiaGlkZGVuXCJdW25hbWU9XCJsaXZlc3RyZWFtLW1vZGVcIl0nKTtcbiAgICAgICAgICAgIGlmIChpbnB1dCAmJiBtb2RlKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQudmFsKG1vZGUpO1xuICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudCgpLnN1Ym1pdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoJCgnLmNsaXBib2FyZC1idG4nKS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAkKCcuY2xpcGJvYXJkLWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciB0YXJnZXRfaWQgPSAkKHRoaXMpLmRhdGEoJ3RhcmdldC1pZCcpO1xuICAgICAgICAgICAgdmFyIHRhcmdldF90aXRsZSA9ICQodGhpcykuZGF0YSgndGFyZ2V0LXRpdGxlJykgPyAkKHRoaXMpLmRhdGEoJ3RhcmdldC10aXRsZScpIDogJ0RhcyBGZWxkJy50b0xvY2FsZVN0cmluZygpO1xuICAgICAgICAgICAgdmFyIGNvcGllZCA9IGNvcHlUb0NsaXBib2FyZCh0YXJnZXRfaWQpO1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBgJHt0YXJnZXRfdGl0bGV9IHd1cmRlIGluIGRpZSBad2lzY2hlbmFibGFnZSBrb3BpZXJ0LmAudG9Mb2NhbGVTdHJpbmcoKTtcbiAgICAgICAgICAgIHZhciB0eXBlID0gJ3N1Y2Nlc3MnO1xuICAgICAgICAgICAgaWYgKCFjb3BpZWQpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYCR7dGFyZ2V0X3RpdGxlfSBrb25udGUgbmljaHQgaW4gZGllIFp3aXNjaGVuYWJsYWdlIGtvcGllcnQgd2VyZGVuLmAudG9Mb2NhbGVTdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB0eXBlID0gJ2Vycm9yJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNob3dNZXNzYWdlQm94KG1lc3NhZ2UsIHR5cGUsIHRhcmdldF9pZCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnI2NvdW50ZG93bl9hY3RpdmUnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZiAoJChldmVudC50YXJnZXQpLmlzKCc6Y2hlY2tlZCcpKSB7XG4gICAgICAgICAgICAkKCcjbGl2ZXN0cmVhbV9uZXh0Jykuc2hvdygoKSA9PiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlRGF0ZVRpbWVJbnB1dEF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCgnI2xpdmVzdHJlYW1fbmV4dCcpLmhpZGUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZURhdGVUaW1lSW5wdXRBdHRyaWJ1dGVzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsICcjbGl2ZXN0cmVhbV9uZXh0JywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgdG9nZ2xlRGF0ZVRpbWVJbnB1dEF0dHJpYnV0ZXMoKTtcbiAgICB9KTtcbn0pO1xuXG5mdW5jdGlvbiB0b2dnbGVEYXRlVGltZUlucHV0QXR0cmlidXRlcygpIHtcbiAgICB2YXIgY291bnRkb3duID0gJCgnI2NvdW50ZG93bl9hY3RpdmUnKS5pcygnOmNoZWNrZWQnKTtcbiAgICB2YXIgbWFudWVsbCA9ICQoJ2lucHV0W25hbWU9XCJtYW51ZWxsXCJdOmNoZWNrZWQnKS52YWwoKTtcbiAgICBpZiAoY291bnRkb3duKSB7XG4gICAgICAgIGlmIChtYW51ZWxsID09IDEpIHtcbiAgICAgICAgICAgICQoJ2lucHV0W25hbWU9XCJuZXh0X2xpdmVzdHJlYW1fZGF0ZVwiXScpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJykuYXR0cigncmVxdWlyZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICQoJ2lucHV0W25hbWU9XCJuZXh0X2xpdmVzdHJlYW1fc3RhcnR0aW1lXCJdJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKS5hdHRyKCdyZXF1aXJlZCcsIHRydWUpO1xuICAgICAgICAgICAgJCgnaW5wdXRbbmFtZT1cIm5leHRfbGl2ZXN0cmVhbV9lbmR0aW1lXCJdJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKS5hdHRyKCdyZXF1aXJlZCcsIHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCgnaW5wdXRbbmFtZT1cIm5leHRfbGl2ZXN0cmVhbV9kYXRlXCJdJykucmVtb3ZlQXR0cigncmVxdWlyZWQnKS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICAgICAgJCgnaW5wdXRbbmFtZT1cIm5leHRfbGl2ZXN0cmVhbV9zdGFydHRpbWVcIl0nKS5yZW1vdmVBdHRyKCdyZXF1aXJlZCcpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgICAgICAkKCdpbnB1dFtuYW1lPVwibmV4dF9saXZlc3RyZWFtX2VuZHRpbWVcIl0nKS5yZW1vdmVBdHRyKCdyZXF1aXJlZCcpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICAkKCdpbnB1dFtuYW1lPVwibmV4dF9saXZlc3RyZWFtX2RhdGVcIl0nKS5yZW1vdmVBdHRyKCdyZXF1aXJlZCcpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgICQoJ2lucHV0W25hbWU9XCJuZXh0X2xpdmVzdHJlYW1fc3RhcnR0aW1lXCJdJykucmVtb3ZlQXR0cigncmVxdWlyZWQnKS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICAkKCdpbnB1dFtuYW1lPVwibmV4dF9saXZlc3RyZWFtX2VuZHRpbWVcIl0nKS5yZW1vdmVBdHRyKCdyZXF1aXJlZCcpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRDb3VudGRvd24oZW5kX3RpbWVzdGFtcCkge1xuICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB2YXIgZGlzdGFuY2UgPSBlbmRfdGltZXN0YW1wIC0gbm93O1xuICAgIC8vIFRpbWUgY2FsY3VsYXRpb25zIGZvciBkYXlzLCBob3VycywgbWludXRlcyBhbmQgc2Vjb25kc1xuICAgIHZhciBkYXlzID0gTWF0aC5mbG9vcihkaXN0YW5jZSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XG4gICAgZGF5cyA9IChkYXlzIDw9IDApID8gMCA6IGRheXM7XG4gICAgdmFyIGhvdXJzID0gTWF0aC5mbG9vcigoZGlzdGFuY2UgJSAoMTAwMCAqIDYwICogNjAgKiAyNCkpIC8gKDEwMDAgKiA2MCAqIDYwKSk7XG4gICAgaG91cnMgPSAoaG91cnMgPD0gMCkgPyAwIDogaG91cnM7XG4gICAgdmFyIG1pbnV0ZXMgPSBNYXRoLmZsb29yKChkaXN0YW5jZSAlICgxMDAwICogNjAgKiA2MCkpIC8gKDEwMDAgKiA2MCkpO1xuICAgIG1pbnV0ZXMgPSAobWludXRlcyA8PSAwKSA/IDAgOiBtaW51dGVzO1xuICAgIHZhciBzZWNvbmRzID0gTWF0aC5mbG9vcigoZGlzdGFuY2UgJSAoMTAwMCAqIDYwKSkgLyAxMDAwKTtcbiAgICBzZWNvbmRzID0gKHNlY29uZHMgPD0gMCkgPyAwIDogc2Vjb25kcztcblxuICAgIHZhciBjb3VudGRvd24gPSBbXTtcbiAgICBpZiAoZGF5cyA+IDApIHtcbiAgICAgICAgZGF5cyA9IChkYXlzIDwgMTApID8gJzAnICsgZGF5cyA6IGRheXM7XG4gICAgICAgIGNvdW50ZG93bi5wdXNoKGRheXMpO1xuICAgIH1cbiAgICBob3VycyA9IChob3VycyA8IDEwKSA/ICcwJyArIGhvdXJzIDogaG91cnM7XG4gICAgY291bnRkb3duLnB1c2goaG91cnMpO1xuICAgIG1pbnV0ZXMgPSAobWludXRlcyA8IDEwKSA/ICcwJyArIG1pbnV0ZXMgOiBtaW51dGVzO1xuICAgIGNvdW50ZG93bi5wdXNoKG1pbnV0ZXMpO1xuICAgIHNlY29uZHMgPSAoc2Vjb25kcyA8IDEwKSA/ICcwJyArIHNlY29uZHMgOiBzZWNvbmRzO1xuICAgIGNvdW50ZG93bi5wdXNoKHNlY29uZHMpO1xuXG4gICAgcmV0dXJuIGNvdW50ZG93bi5qb2luKCc6Jyk7XG59XG5cbmZ1bmN0aW9uIGNvcHlUb0NsaXBib2FyZCh0YXJnZXRfaWQpIHtcbiAgICB2YXIgaXNfY29waWVkID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgbGV0IHRhcmdldGVkX3NwYW5fZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldF9pZCk7XG4gICAgICAgIHZhciB0ZW1wX3RleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xuICAgICAgICB0ZW1wX3RleHRhcmVhLnZhbHVlID0gdGFyZ2V0ZWRfc3Bhbl9lbGVtZW50LnRleHRDb250ZW50O1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRlbXBfdGV4dGFyZWEpO1xuICAgICAgICB0ZW1wX3RleHRhcmVhLnNlbGVjdCgpO1xuICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZChcIkNvcHlcIik7XG4gICAgICAgIHRlbXBfdGV4dGFyZWEucmVtb3ZlKCk7XG4gICAgICAgIGlzX2NvcGllZCA9IHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgIH1cbiAgICByZXR1cm4gaXNfY29waWVkO1xufVxuXG5mdW5jdGlvbiBzaG93TWVzc2FnZUJveChtZXNzYWdlLCB0eXBlLCB0YXJnZXRfaWQpIHtcbiAgICB2YXIgbWVzc2FnZWJveF9lbGVtZW50ID0gJChgIyR7dGFyZ2V0X2lkfWApLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCcubWVzc2FnZWJveCcpO1xuICAgIGlmIChtZXNzYWdlYm94X2VsZW1lbnQubGVuZ3RoKSB7XG4gICAgICAgIG1lc3NhZ2Vib3hfZWxlbWVudC5yZW1vdmVDbGFzcygpO1xuICAgICAgICB2YXIgY2xhc3NfdHlwZSA9IGBtZXNzYWdlYm94XyR7dHlwZX1gO1xuICAgICAgICBtZXNzYWdlYm94X2VsZW1lbnQuYWRkQ2xhc3MoJ21lc3NhZ2Vib3ggJyArIGNsYXNzX3R5cGUpO1xuICAgICAgICBtZXNzYWdlYm94X2VsZW1lbnQudGV4dChtZXNzYWdlKTtcbiAgICAgICAgbWVzc2FnZWJveF9lbGVtZW50LnNob3coKTtcbiAgICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9